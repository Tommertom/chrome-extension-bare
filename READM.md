Taken from the chrome extensions samples (API)
https://github.com/GoogleChrome/chrome-extensions-samples

I used tabCapture and stripped code

I am not sure why I need to manually inject the content-script, even thought the manifest.json should do this?

I changed the name of service-worker into extension worker not to get name-conflicts with other service workers when building PWA features in the popup